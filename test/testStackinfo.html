
<script src="../generatedBuild/stackinfo.umd.js"></script>
<script src="moar.js"></script>
<script>
    function A(asdf) {
        B(asdf)
    }
    
    function B(asdf) {
        C.call(this, asdf)
    }
    
    function C(asdf) {
        new D(asdf)
    }
    
    function D(asdf) {
        E.fn1(asdf)
    }
    
    var E = {
        fn1: function(asdf) {
            F[0].fn2()(asdf)
        }
    }
    
    var F = [{
            fn2: function() {
                return function(asdf) {
                    G(asdf)
                }
            }
        }]
    
    var G = function(asdf) {
        ;[1].forEach(function() {
            H(asdf)  
        })  
    }
    
    var H = function() {
        moar(function() {
            var trace = stackinfo()
            trace.forEach(function(v) {
                console.log(JSON.stringify(v))
            })
        })
    }

    A(23)

    function bench() {
        var t0 = Date.now()
        for(var n=0; n<1000; n++) {
            var trace = stackinfo()
        }

        return Date.now() - t0
    }

    function bench2() {
        console.log(stackinfo.chrome)
        var line = "Object.printStackTrace.implementation.createException (file:///F:/billysFile/code/javascript/nodejs/deadunit/browserPackage/deadunit.browser.gen.umd.js:942:19)"

        console.log(line.match(stackinfo.chrome))

        var t0 = Date.now()
        for(var n=0; n<1000; n++) {
            line.match(stackinfo.chrome)
        }

        return Date.now() - t0
    }

    console.log("Benchmark took "+bench()+"ms")
    console.log("Benchmark 2 took "+bench2()+"ms")

</script>
